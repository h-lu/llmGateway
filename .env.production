# TeachProxy 生产环境配置
# ============================================================
# 数据库配置 (PostgreSQL)
# ============================================================
DATABASE_URL=postgresql+asyncpg://teachproxy:teachproxy123@localhost:5432/teachproxy

# ============================================================
# AI 提供商配置
# ============================================================
# ⚠️ 请替换为你的真实 API Key
DEEPSEEK_API_KEY=sk-your-deepseek-api-key-here
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1

# OpenAI 作为备用（可选）
# OPENAI_API_KEY=sk-your-openai-api-key
# OPENAI_BASE_URL=https://api.openai.com/v1

# 默认提供商
default_provider=deepseek

# Mock 提供商（仅用于测试，设为 false 使用真实 API）
TEACHPROXY_MOCK_PROVIDER=false

# ============================================================
# 平衡架构配置
# ============================================================
# 教师 Key 池 - DeepSeek 直接（主）
TEACHER_DEEPSEEK_API_KEY=sk-your-deepseek-key
TEACHER_DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
DEEPSEEK_DIRECT_TIMEOUT=15.0

# 教师 Key 池 - OpenRouter（备用）
# TEACHER_OPENROUTER_API_KEY=sk-your-openrouter-key
# TEACHER_OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
# OPENROUTER_TIMEOUT=30.0

# LLM 缓存设置
LLM_CACHE_ENABLED=true
LLM_CACHE_TTL_CONCEPT=3600
LLM_CACHE_TTL_GENERAL=600
LLM_CACHE_PREFIX=teachproxy:v1

# API Key 加密
API_KEY_ENCRYPTION_KEY=N0j4NGivD1BJuonSE9BWvgdYjpba1Bmj6lfhLsZ0i1E

# ============================================================
# 限流配置
# ============================================================
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=10
RATE_LIMIT_WINDOW_SECONDS=60
RATE_LIMIT_FAIL_CLOSED=false

# ============================================================
# 缓存配置
# ============================================================
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=300
REDIS_ENABLED=false
REDIS_URL=redis://localhost:6379/0

# ============================================================
# 请求路由配置
# ============================================================
REQUEST_ROUTER_ENABLED=true
REQUEST_ROUTER_STREAMING_LIMIT=50
REQUEST_ROUTER_NORMAL_LIMIT=200
REQUEST_ROUTER_TIMEOUT=5.0

# ============================================================
# 安全配置
# ============================================================
# ⚠️ 请设置强密码
ADMIN_TOKEN=TeachProxy-Admin-2026-Secure

# 学生自助注册（可选）
# STUDENT_REGISTRATION_CODE=TeachProxy-Student-2026
# STUDENT_SELF_REGISTER_DEFAULT_QUOTA=10000

# CORS 配置（生产环境应限制源）
CORS_ORIGINS=["http://localhost:8501", "http://localhost:3000"]

# ============================================================
# 日志配置
# ============================================================
LOG_LEVEL=INFO
LOG_FORMAT=text

# ============================================================
# HTTP 客户端配置
# ============================================================
HTTPX_TIMEOUT=60.0
HTTPX_CONNECT_TIMEOUT=10.0
HTTPX_READ_TIMEOUT=60.0
HTTPX_MAX_CONNECTIONS=100
HTTPX_MAX_KEEPALIVE_CONNECTIONS=20

# ============================================================
# 学期配置
# ============================================================
SEMESTER_START_DATE=2026-02-17
SEMESTER_WEEKS=16

# ============================================================
# 成本追踪
# ============================================================
COST_TRACKING_ENABLED=true
