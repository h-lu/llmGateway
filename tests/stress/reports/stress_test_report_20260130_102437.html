<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>TeachProxy å‹åŠ›æµ‹è¯•æŠ¥å‘Š</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1, h2 {
            color: #333;
        }
        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .metric-value {
            font-size: 32px;
            font-weight: bold;
            color: #2563eb;
        }
        .metric-label {
            color: #666;
            margin-top: 5px;
        }
        .success { color: #22c55e; }
        .warning { color: #f59e0b; }
        .error { color: #ef4444; }
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        th {
            background: #f8f9fa;
            font-weight: 600;
        }
        .config {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .config-item {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸš€ TeachProxy å‹åŠ›æµ‹è¯•æŠ¥å‘Š</h1>
    <p>ç”Ÿæˆæ—¶é—´: 2026-01-30 10:24:37</p>
    
    <div class="config">
        <h3>æµ‹è¯•é…ç½®</h3>
        <div class="config-item">å¹¶å‘ç”¨æˆ·æ•°: <strong>200</strong></div>
        <div class="config-item">æµ‹è¯•æ—¶é•¿: <strong>60 ç§’</strong></div>
        <div class="config-item">åŸºç¡€ URL: <strong>http://localhost:8000</strong></div>
        <div class="config-item">æ€è€ƒæ—¶é—´: <strong>1.0-5.0 ç§’</strong></div>
    </div>
    
    <h2>ğŸ“Š æµ‹è¯•æ‘˜è¦</h2>
    <div class="summary">
        <div class="metric-card">
            <div class="metric-value">3626</div>
            <div class="metric-label">æ€»è¯·æ±‚æ•°</div>
        </div>
        <div class="metric-card">
            <div class="metric-value success">99.5%</div>
            <div class="metric-label">æˆåŠŸç‡</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">60.4</div>
            <div class="metric-label">å¹³å‡ RPS</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">368ms</div>
            <div class="metric-label">P50 å»¶è¿Ÿ</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">818ms</div>
            <div class="metric-label">P95 å»¶è¿Ÿ</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">950ms</div>
            <div class="metric-label">P99 å»¶è¿Ÿ</div>
        </div>
    </div>
    
    <h2>ğŸ“ˆ æ€§èƒ½è¶‹åŠ¿</h2>
    <div class="chart-container">
        <canvas id="trendChart" height="100"></canvas>
    </div>
    
    <h2>ğŸ“‹ è¯·æ±‚ç±»å‹ç»Ÿè®¡</h2>
    <table>
        <thead>
            <tr>
                <th>è¯·æ±‚ç±»å‹</th>
                <th>è¯·æ±‚æ•°</th>
                <th>æˆåŠŸç‡</th>
                <th>å¹³å‡å»¶è¿Ÿ</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>rule_triggered</td><td>363</td><td>99.7%</td><td>232.4ms</td></tr><tr><td>normal</td><td>2526</td><td>99.5%</td><td>329.0ms</td></tr><tr><td>streaming</td><td>737</td><td>99.5%</td><td>683.1ms</td></tr>
        </tbody>
    </table>
    
    <h2>âš ï¸ é”™è¯¯åˆ†å¸ƒ</h2>
    <table>
        <thead>
            <tr>
                <th>é”™è¯¯ç±»å‹</th>
                <th>æ¬¡æ•°</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>ReadError</td><td>17</td></tr><tr><td>RemoteProtocolError</td><td>1</td></tr>
        </tbody>
    </table>
    
    <script>
        const snapshots = [{"time": 0, "rps": 68.41, "latency": 361.71, "active_users": 200}, {"time": 5, "rps": 64.19, "latency": 384.65, "active_users": 200}, {"time": 10, "rps": 54.0, "latency": 378.16, "active_users": 200}, {"time": 15, "rps": 61.39, "latency": 361.42, "active_users": 200}, {"time": 20, "rps": 58.39, "latency": 392.52, "active_users": 200}, {"time": 25, "rps": 59.99, "latency": 369.24, "active_users": 200}, {"time": 30, "rps": 57.79, "latency": 392.27, "active_users": 200}, {"time": 35, "rps": 58.39, "latency": 319.74, "active_users": 200}, {"time": 40, "rps": 56.19, "latency": 396.69, "active_users": 200}, {"time": 45, "rps": 60.39, "latency": 371.32, "active_users": 200}, {"time": 50, "rps": 56.81, "latency": 358.95, "active_users": 200}, {"time": 55, "rps": 62.39, "latency": 365.35, "active_users": 200}, {"time": 60, "rps": 4.2, "latency": 373.79, "active_users": 200}];
        
        new Chart(document.getElementById('trendChart'), {
            type: 'line',
            data: {
                labels: snapshots.map(s => s.time + 's'),
                datasets: [{
                    label: 'RPS',
                    data: snapshots.map(s => s.rps),
                    borderColor: '#2563eb',
                    backgroundColor: 'rgba(37, 99, 235, 0.1)',
                    yAxisID: 'y'
                }, {
                    label: 'å»¶è¿Ÿ (ms)',
                    data: snapshots.map(s => s.latency),
                    borderColor: '#f59e0b',
                    backgroundColor: 'rgba(245, 158, 11, 0.1)',
                    yAxisID: 'y1'
                }, {
                    label: 'æ´»è·ƒç”¨æˆ·',
                    data: snapshots.map(s => s.active_users),
                    borderColor: '#22c55e',
                    backgroundColor: 'rgba(34, 197, 94, 0.1)',
                    yAxisID: 'y'
                }]
            },
            options: {
                responsive: true,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        title: {
                            display: true,
                            text: 'RPS / ç”¨æˆ·æ•°'
                        }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        title: {
                            display: true,
                            text: 'å»¶è¿Ÿ (ms)'
                        },
                        grid: {
                            drawOnChartArea: false,
                        },
                    }
                }
            }
        });
    </script>
</body>
</html>