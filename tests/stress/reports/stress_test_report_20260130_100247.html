<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>TeachProxy å‹åŠ›æµ‹è¯•æŠ¥å‘Š</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1, h2 {
            color: #333;
        }
        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .metric-value {
            font-size: 32px;
            font-weight: bold;
            color: #2563eb;
        }
        .metric-label {
            color: #666;
            margin-top: 5px;
        }
        .success { color: #22c55e; }
        .warning { color: #f59e0b; }
        .error { color: #ef4444; }
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        th {
            background: #f8f9fa;
            font-weight: 600;
        }
        .config {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .config-item {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸš€ TeachProxy å‹åŠ›æµ‹è¯•æŠ¥å‘Š</h1>
    <p>ç”Ÿæˆæ—¶é—´: 2026-01-30 10:02:47</p>
    
    <div class="config">
        <h3>æµ‹è¯•é…ç½®</h3>
        <div class="config-item">å¹¶å‘ç”¨æˆ·æ•°: <strong>25</strong></div>
        <div class="config-item">æµ‹è¯•æ—¶é•¿: <strong>60 ç§’</strong></div>
        <div class="config-item">åŸºç¡€ URL: <strong>http://localhost:8000</strong></div>
        <div class="config-item">æ€è€ƒæ—¶é—´: <strong>3.0-8.0 ç§’</strong></div>
    </div>
    
    <h2>ğŸ“Š æµ‹è¯•æ‘˜è¦</h2>
    <div class="summary">
        <div class="metric-card">
            <div class="metric-value">205</div>
            <div class="metric-label">æ€»è¯·æ±‚æ•°</div>
        </div>
        <div class="metric-card">
            <div class="metric-value warning">82.44%</div>
            <div class="metric-label">æˆåŠŸç‡</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">3.4</div>
            <div class="metric-label">å¹³å‡ RPS</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">798ms</div>
            <div class="metric-label">P50 å»¶è¿Ÿ</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">4485ms</div>
            <div class="metric-label">P95 å»¶è¿Ÿ</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">5466ms</div>
            <div class="metric-label">P99 å»¶è¿Ÿ</div>
        </div>
    </div>
    
    <h2>ğŸ“ˆ æ€§èƒ½è¶‹åŠ¿</h2>
    <div class="chart-container">
        <canvas id="trendChart" height="100"></canvas>
    </div>
    
    <h2>ğŸ“‹ è¯·æ±‚ç±»å‹ç»Ÿè®¡</h2>
    <table>
        <thead>
            <tr>
                <th>è¯·æ±‚ç±»å‹</th>
                <th>è¯·æ±‚æ•°</th>
                <th>æˆåŠŸç‡</th>
                <th>å¹³å‡å»¶è¿Ÿ</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>streaming</td><td>43</td><td>74.4%</td><td>2104.9ms</td></tr><tr><td>normal</td><td>147</td><td>83.0%</td><td>1328.0ms</td></tr><tr><td>rule_triggered</td><td>15</td><td>100.0%</td><td>624.3ms</td></tr>
        </tbody>
    </table>
    
    <h2>âš ï¸ é”™è¯¯åˆ†å¸ƒ</h2>
    <table>
        <thead>
            <tr>
                <th>é”™è¯¯ç±»å‹</th>
                <th>æ¬¡æ•°</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>http_500</td><td>36</td></tr>
        </tbody>
    </table>
    
    <script>
        const snapshots = [{"time": 0, "rps": 1.83, "latency": 2049.32, "active_users": 25}, {"time": 5, "rps": 4.6, "latency": 2183.46, "active_users": 25}, {"time": 10, "rps": 2.4, "latency": 1954.88, "active_users": 25}, {"time": 15, "rps": 3.6, "latency": 1924.06, "active_users": 25}, {"time": 20, "rps": 3.6, "latency": 1738.46, "active_users": 25}, {"time": 25, "rps": 3.0, "latency": 1608.52, "active_users": 25}, {"time": 30, "rps": 3.8, "latency": 1431.32, "active_users": 25}, {"time": 35, "rps": 3.2, "latency": 1253.76, "active_users": 25}, {"time": 40, "rps": 3.4, "latency": 1273.82, "active_users": 25}, {"time": 45, "rps": 3.4, "latency": 1244.99, "active_users": 25}, {"time": 50, "rps": 3.4, "latency": 1222.24, "active_users": 25}, {"time": 55, "rps": 3.4, "latency": 1269.98, "active_users": 25}, {"time": 60, "rps": 1.2, "latency": 1306.1, "active_users": 25}];
        
        new Chart(document.getElementById('trendChart'), {
            type: 'line',
            data: {
                labels: snapshots.map(s => s.time + 's'),
                datasets: [{
                    label: 'RPS',
                    data: snapshots.map(s => s.rps),
                    borderColor: '#2563eb',
                    backgroundColor: 'rgba(37, 99, 235, 0.1)',
                    yAxisID: 'y'
                }, {
                    label: 'å»¶è¿Ÿ (ms)',
                    data: snapshots.map(s => s.latency),
                    borderColor: '#f59e0b',
                    backgroundColor: 'rgba(245, 158, 11, 0.1)',
                    yAxisID: 'y1'
                }, {
                    label: 'æ´»è·ƒç”¨æˆ·',
                    data: snapshots.map(s => s.active_users),
                    borderColor: '#22c55e',
                    backgroundColor: 'rgba(34, 197, 94, 0.1)',
                    yAxisID: 'y'
                }]
            },
            options: {
                responsive: true,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        title: {
                            display: true,
                            text: 'RPS / ç”¨æˆ·æ•°'
                        }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        title: {
                            display: true,
                            text: 'å»¶è¿Ÿ (ms)'
                        },
                        grid: {
                            drawOnChartArea: false,
                        },
                    }
                }
            }
        });
    </script>
</body>
</html>